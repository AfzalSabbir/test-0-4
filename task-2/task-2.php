<!DOCTYPE html>
<html lang="en">
<head>
    <title>
        Test 2 | Used JavaScript
    </title>
    <style>
        table, th, td {
            border: 1px solid black;
            padding: 2px;
        }

        th, td {
            padding: 2px 8px;
        }
    </style>
</head>
<body>

<?php
include "../tabs.php"; ?>

<table id="table">
    <thead>
    <tr>
        <th>SL</th>
        <th>Lat</th>
        <th>Lng</th>
        <th>Division</th>
        <th>IsMatched</th>
    </tr>
    </thead>
    <tbody>
    </tbody>
</table>

<script>
    let testDataSets = [
        {"SL": "1", "Lat": "24.69478177", "Lng": "88.15597944", "Division": "Rajshahi"},
        {"SL": "2", "Lat": "24.82572113", "Lng": "88.25897626", "Division": "Rajshahi"},
        {"SL": "3", "Lat": "24.85438465", "Lng": "88.30704144", "Division": "Rajshahi"},
        {"SL": "4", "Lat": "25.12946432", "Lng": "88.59131266", "Division": "Rajshahi"},
        {"SL": "5", "Lat": "25.13070762", "Lng": "88.87283729", "Division": "Rajshahi"},
        {"SL": "6", "Lat": "25.17545811", "Lng": "89.00192664", "Division": "Rajshahi"},
        {"SL": "7", "Lat": "25.00032031", "Lng": "89.48319406", "Division": "Rajshahi"},
        {"SL": "8", "Lat": "24.89470303", "Lng": "89.509344", "Division": "Rajshahi"},
        {"SL": "9", "Lat": "24.84941078", "Lng": "89.37383978", "Division": "Rajshahi"},
        {"SL": "10", "Lat": "24.91949889", "Lng": "88.76050491", "Division": "Rajshahi"},
        {"SL": "11", "Lat": "24.86235312", "Lng": "88.69156417", "Division": "Rajshahi"},
        {"SL": "12", "Lat": "24.76093527", "Lng": "88.70107323", "Division": "Rajshahi"},
        {"SL": "13", "Lat": "24.80302296", "Lng": "88.9269136", "Division": "Rajshahi"},
        {"SL": "23", "Lat": "24.27384655", "Lng": "88.756127", "Division": "Rajshahi"},
    ];
    const divisions  = {
        testDataSets: null,
        Dhaka       : [
            {"Lat": "24.51961658", "Lng": "89.74430944"},
            {"Lat": "24.67398429", "Lng": "89.88799001"},
            {"Lat": "24.73963807", "Lng": "89.88060857"},
            {"Lat": "24.75865716", "Lng": "89.93176366"},
            {"Lat": "24.72498203", "Lng": "89.97742559"},
            {"Lat": "24.77923191", "Lng": "90.04162694"},
            {"Lat": "24.7867128", "Lng": "90.07836248"},
            {"Lat": "24.77175058", "Lng": "90.09587194"},
            {"Lat": "24.73489259", "Lng": "90.09022321"},
            {"Lat": "24.73295342", "Lng": "90.13126637"},
            {"Lat": "24.64422597", "Lng": "90.14880802"},
            {"Lat": "24.59151724", "Lng": "90.12621309"},
            {"Lat": "24.53066588", "Lng": "90.17296935"},
            {"Lat": "24.47853431", "Lng": "90.23757841"},
            {"Lat": "24.4636914", "Lng": "90.20899679"},
            {"Lat": "24.40586554", "Lng": "90.24727727"},
            {"Lat": "24.34207008", "Lng": "90.2311411"},
            {"Lat": "24.28199793", "Lng": "90.28057958"},
            {"Lat": "24.30077354", "Lng": "90.32452489"},
            {"Lat": "24.29827028", "Lng": "90.35473729"},
            {"Lat": "24.29013437", "Lng": "90.39902593"},
            {"Lat": "24.34019326", "Lng": "90.43919469"},
            {"Lat": "24.30640568", "Lng": "90.52845861"},
            {"Lat": "24.28919558", "Lng": "90.52399541"},
            {"Lat": "24.24882092", "Lng": "90.57652379"},
            {"Lat": "24.26932283", "Lng": "90.6142893"},
            {"Lat": "24.26854038", "Lng": "90.64656164"},
            {"Lat": "24.33706516", "Lng": "90.62252904"},
            {"Lat": "24.42024634", "Lng": "90.64827825"},
            {"Lat": "24.45712872", "Lng": "90.57635213"},
            {"Lat": "24.49337546", "Lng": "90.58339025"},
            {"Lat": "24.47212864", "Lng": "90.66990758"},
            {"Lat": "24.51274443", "Lng": "90.69600011"},
            {"Lat": "24.48119022", "Lng": "90.72346593"},
            {"Lat": "24.50915202", "Lng": "90.75299169"},
            {"Lat": "24.50962061", "Lng": "90.7893839"},
            {"Lat": "24.58519538", "Lng": "90.82096959"},
            {"Lat": "24.60954449", "Lng": "90.90336706"},
            {"Lat": "24.60704736", "Lng": "91.01529027"},
            {"Lat": "24.62827134", "Lng": "91.03108312"},
            {"Lat": "24.60142864", "Lng": "91.110734"},
            {"Lat": "24.64106641", "Lng": "91.12927343"},
            {"Lat": "24.63388885", "Lng": "91.17939855"},
            {"Lat": "24.56621814", "Lng": "91.23430873"},
            {"Lat": "24.48851322", "Lng": "91.19034196"},
            {"Lat": "24.48615038", "Lng": "91.22463132"},
            {"Lat": "24.4264202", "Lng": "91.24377157"},
            {"Lat": "24.41696391", "Lng": "91.22437383"},
            {"Lat": "24.37928801", "Lng": "91.25012304"},
            {"Lat": "24.36646626", "Lng": "91.22059728"},
            {"Lat": "24.31704348", "Lng": "91.23570348"},
            {"Lat": "24.25226422", "Lng": "91.15193273"},
            {"Lat": "24.25382932", "Lng": "91.11897374"},
            {"Lat": "24.15738289", "Lng": "90.99469091"},
            {"Lat": "24.09158217", "Lng": "91.056489"},
            {"Lat": "24.02449332", "Lng": "90.98679448"},
            {"Lat": "23.93289502", "Lng": "90.94868566"},
            {"Lat": "23.86635138", "Lng": "90.90508367"},
            {"Lat": "23.86069987", "Lng": "90.7667246"},
            {"Lat": "23.6608553", "Lng": "90.73101903"},
            {"Lat": "23.67594861", "Lng": "90.64518834"},
            {"Lat": "23.62374352", "Lng": "90.63420202"},
            {"Lat": "23.61713778", "Lng": "90.65480138"},
            {"Lat": "23.58662123", "Lng": "90.66441442"},
            {"Lat": "23.50667829", "Lng": "90.71316625"},
            {"Lat": "23.49125063", "Lng": "90.68123723"},
            {"Lat": "23.49597358", "Lng": "90.63969518"},
            {"Lat": "23.49282497", "Lng": "90.58613683"},
            {"Lat": "23.38068552", "Lng": "90.54081823"},
            {"Lat": "23.34790774", "Lng": "90.58888341"},
            {"Lat": "23.30818536", "Lng": "90.56347753"},
            {"Lat": "23.21419157", "Lng": "90.6218424"},
            {"Lat": "23.09423774", "Lng": "90.52880193"},
            {"Lat": "23.07781465", "Lng": "90.57034398"},
            {"Lat": "23.034813", "Lng": "90.56820895"},
            {"Lat": "23.03132765", "Lng": "90.50416048"},
            {"Lat": "23.00003442", "Lng": "90.47993745"},
            {"Lat": "23.0091891", "Lng": "90.41863556"},
            {"Lat": "23.03651615", "Lng": "90.42025696"},
            {"Lat": "23.05815169", "Lng": "90.32231475"},
            {"Lat": "22.98855808", "Lng": "90.32765771"},
            {"Lat": "22.96880307", "Lng": "90.22985364"},
            {"Lat": "23.04827964", "Lng": "90.23710634"},
            {"Lat": "23.06897063", "Lng": "90.21895315"},
            {"Lat": "23.06770714", "Lng": "90.15801336"},
            {"Lat": "23.00941624", "Lng": "90.12559081"},
            {"Lat": "22.97259626", "Lng": "90.0663891"},
            {"Lat": "22.86729589", "Lng": "90.01596357"},
            {"Lat": "22.84894692", "Lng": "89.94871522"},
            {"Lat": "22.87109192", "Lng": "89.90961934"},
            {"Lat": "22.87528324", "Lng": "89.88286163"},
            {"Lat": "22.95157435", "Lng": "89.80117227"},
            {"Lat": "23.01684222", "Lng": "89.75864316"},
            {"Lat": "23.06573293", "Lng": "89.73480369"},
            {"Lat": "23.103238", "Lng": "89.67594529"},
            {"Lat": "23.13834509", "Lng": "89.66861214"},
            {"Lat": "23.11990465", "Lng": "89.70065112"},
            {"Lat": "23.12924852", "Lng": "89.74092985"},
            {"Lat": "23.1845485", "Lng": "89.73050679"},
            {"Lat": "23.16472363", "Lng": "89.68094493"},
            {"Lat": "23.21281113", "Lng": "89.68687798"},
            {"Lat": "23.23400911", "Lng": "89.67645491"},
            {"Lat": "23.23533017", "Lng": "89.63341619"},
            {"Lat": "23.25291683", "Lng": "89.62674285"},
            {"Lat": "23.27306372", "Lng": "89.640229"},
            {"Lat": "23.27903624", "Lng": "89.66070498"},
            {"Lat": "23.28801422", "Lng": "89.64897032"},
            {"Lat": "23.28934953", "Lng": "89.62422024"},
            {"Lat": "23.3360499", "Lng": "89.6029188"},
            {"Lat": "23.37643117", "Lng": "89.60359002"},
            {"Lat": "23.47668716", "Lng": "89.60395481"},
            {"Lat": "23.50522218", "Lng": "89.54319741"},
            {"Lat": "23.50793761", "Lng": "89.51745893"},
            {"Lat": "23.47731697", "Lng": "89.50597907"},
            {"Lat": "23.48278827", "Lng": "89.48925282"},
            {"Lat": "23.51921192", "Lng": "89.49221934"},
            {"Lat": "23.53080989", "Lng": "89.53387137"},
            {"Lat": "23.59797237", "Lng": "89.47435985"},
            {"Lat": "23.62641718", "Lng": "89.47801973"},
            {"Lat": "23.67728491", "Lng": "89.41006328"},
            {"Lat": "23.66561146", "Lng": "89.36200882"},
            {"Lat": "23.72184669", "Lng": "89.30502797"},
            {"Lat": "23.88456012", "Lng": "89.35463811"},
            {"Lat": "23.80291477", "Lng": "89.61178686"},
            {"Lat": "23.83055433", "Lng": "89.72474004"},
            {"Lat": "23.98623072", "Lng": "89.68525792"},
            {"Lat": "24.07653725", "Lng": "89.81022741"},
            {"Lat": "24.51961658", "Lng": "89.74430944"},
        ],
        Chattogram  : [
            {"Lat": "24.14723085", "Lng": "91.26570637"},
            {"Lat": "24.25307594", "Lng": "91.32887776"},
            {"Lat": "24.26950848", "Lng": "91.30415852"},
            {"Lat": "24.22458783", "Lng": "91.27806599"},
            {"Lat": "24.25996221", "Lng": "91.11876423"},
            {"Lat": "24.15976148", "Lng": "90.98830158"},
            {"Lat": "24.09176807", "Lng": "91.050443"},
            {"Lat": "24.03126435", "Lng": "90.98898823"},
            {"Lat": "23.93904329", "Lng": "90.94744618"},
            {"Lat": "23.8706191", "Lng": "90.90315754"},
            {"Lat": "23.8574323", "Lng": "90.76720173"},
            {"Lat": "23.66450086", "Lng": "90.726003"},
            {"Lat": "23.67865049", "Lng": "90.64497883"},
            {"Lat": "23.62172823", "Lng": "90.62918598"},
            {"Lat": "23.61134747", "Lng": "90.65081532"},
            {"Lat": "23.50592054", "Lng": "90.70746357"},
            {"Lat": "23.49364146", "Lng": "90.67759449"},
            {"Lat": "23.50450378", "Lng": "90.6406873"},
            {"Lat": "23.49395632", "Lng": "90.57906086"},
            {"Lat": "23.37677567", "Lng": "90.53305561"},
            {"Lat": "23.3477795", "Lng": "90.58592732"},
            {"Lat": "23.30994889", "Lng": "90.5570882"},
            {"Lat": "23.21658739", "Lng": "90.61476643"},
            {"Lat": "23.09410925", "Lng": "90.52275593"},
            {"Lat": "23.07452764", "Lng": "90.56258137"},
            {"Lat": "23.0287208", "Lng": "90.5660146"},
            {"Lat": "22.99949105", "Lng": "90.63639576"},
            {"Lat": "22.87792234", "Lng": "90.71638996"},
            {"Lat": "22.68293258", "Lng": "90.81526692"},
            {"Lat": "22.49771957", "Lng": "91.01258039"},
            {"Lat": "22.48054198", "Lng": "90.91142328"},
            {"Lat": "22.41008624", "Lng": "90.94329725"},
            {"Lat": "22.42690113", "Lng": "90.98052024"},
            {"Lat": "22.35864678", "Lng": "91.00538361"},
            {"Lat": "21.6194256", "Lng": "91.02312629"},
            {"Lat": "20.53711692", "Lng": "92.34325289"},
            {"Lat": "21.2274119", "Lng": "92.97771334"},
            {"Lat": "23.77643623", "Lng": "92.28557467"},
            {"Lat": "23.99756121", "Lng": "91.31536644"},
            {"Lat": "24.14723085", "Lng": "91.26570637"},
        ],
        Rajshahi    : [
            {"Lat": "24.18371547", "Lng": "88.7325964"},
            {"Lat": "24.10319987", "Lng": "88.88159848"},
            {"Lat": "24.12920851", "Lng": "88.94133664"},
            {"Lat": "24.1179283", "Lng": "89.00725461"},
            {"Lat": "24.00758062", "Lng": "89.05257321"},
            {"Lat": "23.98005871", "Lng": "89.06410542"},
            {"Lat": "23.95817842", "Lng": "89.10173016"},
            {"Lat": "23.94782449", "Lng": "89.18035107"},
            {"Lat": "23.98453012", "Lng": "89.17794781"},
            {"Lat": "23.98390276", "Lng": "89.21296673"},
            {"Lat": "23.87971888", "Lng": "89.27201824"},
            {"Lat": "23.90232011", "Lng": "89.27201824"},
            {"Lat": "23.87281216", "Lng": "89.31115704"},
            {"Lat": "23.88474172", "Lng": "89.34548931"},
            {"Lat": "23.79719192", "Lng": "89.61064897"},
            {"Lat": "23.82734521", "Lng": "89.72875199"},
            {"Lat": "23.98484732", "Lng": "89.69118154"},
            {"Lat": "24.07327407", "Lng": "89.81615102"},
            {"Lat": "24.51824824", "Lng": "89.75096623"},
            {"Lat": "24.56446975", "Lng": "89.79010502"},
            {"Lat": "24.61878947", "Lng": "89.76744572"},
            {"Lat": "24.62337532", "Lng": "89.78690975"},
            {"Lat": "24.66706211", "Lng": "89.78553646"},
            {"Lat": "24.68078909", "Lng": "89.80201595"},
            {"Lat": "24.71759489", "Lng": "89.77455013"},
            {"Lat": "24.73817644", "Lng": "89.78965633"},
            {"Lat": "24.77184799", "Lng": "89.77317684"},
            {"Lat": "24.77558871", "Lng": "89.71961849"},
            {"Lat": "24.80039191", "Lng": "89.73747127"},
            {"Lat": "24.83155396", "Lng": "89.68185298"},
            {"Lat": "24.89011738", "Lng": "89.66056697"},
            {"Lat": "24.90389281", "Lng": "89.68513814"},
            {"Lat": "25.04394271", "Lng": "89.65149251"},
            {"Lat": "25.05016344", "Lng": "89.60136738"},
            {"Lat": "25.03709953", "Lng": "89.56634846"},
            {"Lat": "25.05887195", "Lng": "89.47845784"},
            {"Lat": "25.0754576", "Lng": "89.4157452"},
            {"Lat": "25.05306609", "Lng": "89.3855328"},
            {"Lat": "25.07110401", "Lng": "89.36356015"},
            {"Lat": "25.11898492", "Lng": "89.33540768"},
            {"Lat": "25.11401115", "Lng": "89.29146237"},
            {"Lat": "25.09224854", "Lng": "89.28047604"},
            {"Lat": "25.10717189", "Lng": "89.24889035"},
            {"Lat": "25.1637986", "Lng": "89.21446289"},
            {"Lat": "25.18616983", "Lng": "89.18631043"},
            {"Lat": "25.22841538", "Lng": "89.20484986"},
            {"Lat": "25.25760595", "Lng": "89.14648499"},
            {"Lat": "25.24083776", "Lng": "89.10047974"},
            {"Lat": "25.26629965", "Lng": "89.06970138"},
            {"Lat": "25.2712672", "Lng": "89.0291893"},
            {"Lat": "25.26567869", "Lng": "89.00653"},
            {"Lat": "25.48591889", "Lng": "88.03012008"},
            {"Lat": "24.28810531", "Lng": "87.91385909"},
            {"Lat": "24.18371547", "Lng": "88.7325964"},

            /*{"Lat": "24.84941078", "Lng": "89.37383978"},*/
        ],

        /**
         * Setting test data set array
         *
         * @param testDataSets
         * @returns {divisions}
         */
        setTestDataSets(testDataSets = null) {
            this.testDataSets = this.getArray(testDataSets);
            return this;
        },

        /**
         * Get divisions or {divisions} itself
         *
         * @param division
         * @returns {divisions}
         */
        getDivisions(division = null) {
            return division ?? this;
        },

        /**
         * Get test data sets in array
         *
         * @param testDataSets
         * @returns {[{Lng: string, SL: string, Division: string, Lat: string}]|null}
         */
        getArray(testDataSets = null) {
            return testDataSets.constructor === Object
                   ? [{...{SL: '', Lat: '', Lng: '', Division: ''}, ...testDataSets}]
                   : testDataSets
        },

        /**
         * Verifying locations
         *
         * @param testDataSets
         * @returns {*}
         */
        verifyLocation(testDataSets = null) {
            testDataSets = testDataSets
                           ? this.getArray(testDataSets)
                           : this.testDataSets;
            return testDataSets?.map((testDataSet) => {
                testDataSet.isMatched = this[testDataSet.Division]?.some(location =>
                    location.Lat === testDataSet.Lat && location.Lng === location.Lng) ? "yes" : "no";
                return testDataSet;
            });
        },
    };

    /**
     * Getting result of testDataSets
     */
    let result = divisions.setTestDataSets(testDataSets).verifyLocation();
    console.log(result);

    /**
     * Creating a preview for browser
     *
     * @type {Element | any}
     */
    let tableTbody     = document.querySelector("#table tbody");
    let tableTbodyData = '';
    result.forEach((item) => {
        tableTbodyData +=
            `<tr>
                <td style="text-align: center;">${item.SL ?? ''}</td>
                <td style="text-align: left;">${item.Lat ?? ''}</td>
                <td style="text-align: left;">${item.Lng ?? ''}</td>
                <td style="text-align: left;">${item.Division ?? ''}</td>
                <td style="text-align: center;">${item.isMatched ?? ''}</td>
            </tr>`;
    });
    tableTbody.innerHTML = tableTbodyData;
</script>
</body>
</html>